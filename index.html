<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>FairCAPTCHA</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

  <style>
    body{padding-top: 50px;scroll-behavior: smooth;}
    header{
      background:rgb(90,198,169);
      background: radial-gradient(circle at 80% 50%, rgba(60, 72, 88, 0.05) 0%, rgba(60, 72, 88, 0.05) 33.333%, rgba(206, 212, 218, 0.1) 33.333%, rgba(206, 212, 218, 0.1) 66.666%, rgba(73, 80, 87, 0.1) 66.666%, rgba(73, 80, 87, 0.1) 99.999%), linear-gradient(45deg, #00c9a7, #2d84fb)
    }
    .nav-link.active{
      background-color: #f8f9fa!important;
      border-color: #dee2e6 #dee2e6 #f8f9fa!important;
    }
    .tab-content{
      background:#f8f9fa;
      padding:10px;
      min-height:8em;
      border: 1px solid transparent;
      border-color: transparent #dee2e6 #dee2e6;
      border-bottom-left-radius: .25rem;
      border-bottom-right-radius: .25rem;
    }
    p{text-align:justify}
  </style>

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#footer"><img height="40" src="https://connect.sense.africa/images/logo-light.png"/></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
            <a class="nav-link" href="#desc">Description</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#howto">How-to</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#demo">Demo</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="mailto:faircaptcha@sense.africa">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="py-5 mb-5">
    <div class="container h-100">
      <div class="row h-100 align-items-center">
        <div class="col-lg-12">
          <h1 class="display-4 text-white mt-5 mb-2">FairCAPTCHA</h1>
          <p class="lead mb-5 text-white-50">Stop bots and help make the web more inclusive.</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Page Content -->
  <div class="container">

    <div class="row">
      <div class="col-md-8 mb-5">
        <h2 id="desc">What is FairCAPTCHA</h2>
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" href="#description" data-toggle="tab" role="tab" aria-controls="description" aria-selected="true" id="description-tab">Description</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" href="#justification" data-toggle="tab" role="tab" aria-controls="justification" aria-selected="false" id="justification-tab">Why it matters</a>
          </li>
        </ul>
        <div class="tab-content" id="tab_what_is">
          <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
            <p>FairCAPTCHA is an AI-powered open-source captcha solution to stop spam and bots on websites and apps.</p>
            <p>This solution gives website owners more control and is more respectful of users' privacy. Also, it  contributes to making technology more inclusive, by transparently learning from data sourced from diverse and usually under-represented people.</p>
            <p>Current  status is <span class="badge badge-warning">OPEN BETA</span></p>
          </div>
          <div class="tab-pane fade" id="justification" role="tabpanel" aria-labelledby="justification-tab">
            This is why it matters
          </div>
        </div>
        <br/>
        <h2 id="how-to">Get FairCAPTCHA</h2>
        <ol class="nav nav-tabs" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" href="#step1" data-toggle="tab" role="tab" aria-controls="step1" aria-selected="true" id="step1-tab">1: Options</a>
          </li>
          <li class="nav-item"  role="presentation">
            <a class="nav-link disabled" href="#step2" aria-disabled="true" data-toggle="tab" role="tab" aria-controls="step2" id="step2-tab">2: API keys</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link disabled" href="#step3" aria-disabled="true" data-toggle="tab" role="tab" aria-controls="step3" id="step3-tab">3: Front-end</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link disabled" href="#step4" aria-disabled="true" data-toggle="tab" role="tab" aria-controls="step4" id="step4-tab">4: Back-end</a>
          </li>
        </ol>
        <div class="tab-content" id="tab_get">
          <div class="tab-pane fade show active" id="step1" role="tabpanel" aria-labelledby="step1-tab">
            <form onsubmit="return process_form(this);">
              <div class="form-group">
                <label for="exampleFormControlInput1">Email address</label>
                <input type="email" class="form-control" name="email" placeholder="name@example.com" aria-describedby="email_explain" required>
                <small id="email_explain" class="form-text text-muted">
                  A unique code will be sent to this address to manage the API key.
                </small>
              </div>
              <div class="form-group">
                <label for="exampleFormControlSelect1">API endpoint</label>
                <select class="form-control" name="endpoint" aria-describedby="endpoints_needed">
                  <option value="https://salty-ocean-83073.herokuapp.com">Sense Africa (beta)</option>
                </select>
                <small id="endpoints_needed" class="form-text text-muted">
                  Do you run a trustworthy endpoint? <a href="mailto:faircaptcha@sense.africa">Contact us</a> to be featured here.
                </small>
              </div>
              <div class="form-group">
                <label for="exampleFormControlSelect2">Signals used for bot detection</label>
                <select multiple class="form-control" name="signals" aria-describedby="signals_explain" required>
                  <option selected value="request">IP address and other request metadata</option>
                  <option selected value="device">Device characteristics</option>
                  <option selected value="behavior">Scrolling and behavior on webpage</option>
                  <option selected value="cookie">Actions on other webpages (uses cookie)</option>
                  <option selected value="auto">All future signals (notified by  e-mail)</option>
                </select>
                <small id="signals_explain" class="form-text text-muted">
                  More signals result in better accuracy. Options can be changed later.
                </small>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                <label class="form-check-label" for="terms">
                  I agree to the <a>Terms and Privacy</a> notices of the API  endpoint. 
                </label>
              </div>
              <br/>
              <div class="col-md-12 bg-light text-right">
                <button type="submit" class="btn btn-primary mb-2">Save options</button>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="step2" role="tabpanel" aria-labelledby="step2-tab">
            <button type="button" class="btn btn-secondary mb-2" onclick="gen_keys()">Generate unique keys</button>
            <div class="spinner-border spinner-border-sm ml-2" role="status" id="keys_loading" style="display:none;">
              <span class="sr-only">Loading...</span>
            </div>
            <br/>
            <div class="form-group">
              <textarea class="form-control" id="key_display" readonly rows="5" aria-describedby="copy_keys" style="font-family: monospace;"></textarea>
              <small id="copy_keys" class="form-text text-muted">
                <a href="javascript:copy_keys()">copy to clipboard</a>
              </small>
            </div>
            <br/>
            <div class="col-md-12 bg-light text-right">
              <a href="#" id="keys_saved"class="btn btn-primary mb-2 disabled" role="button" aria-disabled="true">I have saved my keys</a>
            </div>
          </div>
          <div class="tab-pane fade" id="step3" role="tabpanel" aria-labelledby="step3-tab"></div>
          <div class="tab-pane fade" id="step4" role="tabpanel" aria-labelledby="step4-tab"></div>
        </div>
        
        <!-- <a class="btn btn-primary btn-lg" href="#">Call to Action &raquo;</a>  -->
      </div>
      <div class="col-md-4 mb-5">
        <h2 id="demo">Demo</h2>
        <hr>
        <div class="d-flex justify-content-center">
          <style>
              #faircaptcha_icon{
                width:38px;
                height:38px;
                fill:#00c9a7;
                border:2px solid #00c9a7;
                border-radius:50%;
                padding: 5px;
                position:absolute;
                bottom:6px;
                left:5px
              }
          </style>
          <div id="box" style="font-family:arial;width:300px;height:300px;border:2px solid #e9ecef;border-radius:5px;border-bottom-left-radius: 25px;border-bottom-right-radius: 25px;color:black;font-size:16px;position:absolute;background:white;overflow:hidden">
              <header style="width:100%;background:#e9ecef">
                  <p style="margin: 0;padding: 15px;">
                      faircaptcha
                      &nbsp;
                      <b style="color:white;background:black;border-radius:50%;cursor:pointer;font-size: 12px;padding: 3px 6px 3px 6px;font-family: monospace;font-weight: normal;">?</b>
                      <small style="float:right"><span style="color:#00c9a7">English</span> French</small>
                  </p>
              </header>
              <p style="margin: 0;padding: 10px;font-size: 12px;font-family: monospace;">Use the recording button below to record yourself saying the phrase in the box below.</p>
              <div style="border:none;width:90%;margin-left:5%;height:60px;background:#e9ecef"></div>
              <div style="width:100%;position:absolute;bottom:0;left:0;height:50px;border-top:2px solid #e9ecef;overflow:hidden" id="faircaptcha_slider">
                  <div style="position:absolute;left:0;top:0;height:100%;width:50px;border-bottom-right-radius: 25px;border-top-right-radius: 25px"></div>
              </div>
              <em style="position: absolute;bottom: 16px;left:0;text-align: center;width: 100%;font-size: 14px;" id="faircaptcha_text">
                  Touch / click icon to activate
              </em>
              <svg id="faircaptcha_icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"><g><path d="M500,713.3c95.6,0,172.8-82,172.8-182.7v-338C672.8,92,595.6,10,500,10S327.2,92,327.2,192.7v338C327.2,631.3,404.4,713.3,500,713.3z"/><path d="M742.8,360v174.3c0,131.7-108.9,238.9-240.6,238.9S261.6,666,261.6,534.3V360H220v174.3c0,147,115.9,268.2,262.5,278.9v137.4H322.8V990H675v-39.4H524.1V813.3C668.4,802.5,780,681.3,780,534.3V360H742.8z"/></g></svg>
          </div>
      
          <!-- inserting these scripts at the end to be able to use all the elements in the DOM -->
          <script src="demo/demo.js"></script>
        </div>
      </div>
    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->

  <!-- Footer -->
  <footer id="footer"class="py-5 bg-light">
    <div class="container text-right">
      <p class="m-0 text-center" style="font-family:monospace">Copyright &copy; Sense Africa 2020</p>
      <img height="60" src="https://connect.sense.africa/images/logo-dark.png"href="https://sense.africa"/>
    </div>
    <!-- /.container -->
  </footer>

  <script type="text/javascript">
    var key_display = document.getElementById("key_display");
    var generating_keys = false;

    function process_form(form)
    {
      if (form.terms.checked)
      {
        let options={
          email:form.email.value,
          endpoint:form.endpoint.value,
          signals:[]
        };
        let i=0;
        for(i=0;i<form.signals.options.length;i++){
          if (form.signals.options[i].selected){
            options.signals.push(form.signals.options[i].value)
          }
        }
        if (localStorage.getItem("options") != JSON.stringify(options)){
          localStorage.setItem("options", JSON.stringify(options));
          key_display.value="";
        }
        activate_step(2);
      }
      return false;
    }
    function activate_step(step){
      $("#step"+step+"-tab").removeClass("disabled").click();
    }
    function display_key(text, color){
      key_display.style.color = color || "black";
      key_display.value = text;
    }
    function gen_keys(){
      if(localStorage.getItem("options")) {
        options = JSON.parse(localStorage.getItem("options"));
        if (generating_keys || typeof(options.processed)!="undefined") return;

        key_display.value="";
        generating_keys=true;
        $("#keys_loading").show();
        $.post(
          options.endpoint+"/register",
          options,
          function(data){
            var resp,
            submitted_options = options;
            try{
              resp = JSON.parse(data)
              if (typeof(resp)=="object"
                && typeof(resp.key)=="string"
                && typeof(resp.secret)=="string"){
                //new account ok
                submitted_options.processed = true;
                localStorage.setItem("options", JSON.stringify(submitted_options))
                display_key(JSON.stringify(resp,null,2));
                $("#keys_saved").removeClass("disabled").attr({"href":"activate_step(3)"});
              } else throw "Incorrect server response"
            }
            catch(err){
              //account creation failed
              display_key(err + "\nTry again later or switch endpoint", "red")
            }   
          },
          "text")
          .fail(function(){
            display_key("Network error\nTry again later or switch endpoint", "red")
          })
          .always(function(){
            $("#keys_loading").hide();
            generating_keys=false;
          })

      }
    }

    function copy_keys(){
      var message;

      if (key_display.value){
        key_display.select();
        key_display.setSelectionRange(0, 99999); /*For mobile devices*/

        document.execCommand("copy");
        message = "key text copied"
        
      } else message = "no text to copy";

      $('#copy_keys a').tooltip({
          title:message,
          placement:"bottom",
          trigger:"manual"
        }).tooltip('show');
        setTimeout(function(){
          $('#copy_keys a').tooltip('hide')
        }, 2000);
    }
  </script>

  <!-- Bootstrap core JavaScript -->
  <!-- <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script> -->

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

</body>

</html>
